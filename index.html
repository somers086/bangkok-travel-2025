
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>æ›¼è°·æ—…éŠåŠ©æ‰‹ 2025</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --safe-top: env(safe-area-inset-top);
      --safe-bottom: env(safe-area-inset-bottom);
    }
    body { 
      font-family: 'Inter', 'Noto Sans TC', sans-serif; 
      background-color: #F8F9FA; 
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior-y: contain;
    }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .custom-scrollbar::-webkit-scrollbar { width: 5px; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #A4B0F5; border-radius: 10px; }
    
    .app-container { height: 100vh; height: 100dvh; display: flex; flex-direction: column; overflow: hidden; }
    .main-content { flex: 1; min-height: 0; overflow: hidden; position: relative; }
    
    [v-cloak] { display: none; }
    
    .glass-nav {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
    
    .fade-up-enter-active { transition: all 0.4s ease-out; }
    .fade-up-enter-from { opacity: 0; transform: translateY(20px); }

    @keyframes slide-up {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }
    .animate-slide-up { animation: slide-up 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
  </style>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.39.0"
  }
}
</script>
</head>
<body class="text-[#2D3436]">
  <div id="app" v-cloak class="app-container max-w-md mx-auto relative shadow-2xl bg-[#F8F9FA]">
    
    <!-- Header -->
    <header class="px-6 pt-12 pb-4 bg-[#F8F9FA] z-30 shrink-0 border-b border-gray-100/50">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-black text-[#4464AD]">
            {{ activeTab === 'itinerary' ? 'æ›¼è°·è¡Œç¨‹ ğŸ‡¹ğŸ‡­' : activeTab === 'finance' ? 'æ—…éŠè¨˜å¸³ à¸¿' : 'å‚™å¿˜æ¸…å–®' }}
          </h1>
          <p class="text-[10px] font-bold text-[#466995] tracking-widest uppercase opacity-60">Feb 25 - Mar 05</p>
        </div>
        <div class="flex space-x-2">
           <div class="w-8 h-8 rounded-full bg-[#4464AD]/10 flex items-center justify-center text-[#4464AD]">
             <i data-lucide="sun" class="w-4 h-4"></i>
           </div>
        </div>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-content">
      
      <!-- è¡Œç¨‹è¦–åœ– -->
      <div v-if="activeTab === 'itinerary'" class="h-full flex flex-col">
        <!-- æ—¥æœŸé¸æ“‡å™¨ -->
        <div class="shrink-0 bg-[#F8F9FA]/90 backdrop-blur-md border-b border-gray-100 py-4">
          <div class="flex overflow-x-auto whitespace-nowrap px-4 no-scrollbar space-x-2">
            <button v-for="(day, idx) in itinerary" :key="idx" 
              @click="currentDayIdx = idx"
              :class="['px-4 py-2 rounded-xl text-[10px] font-black transition-all duration-300', 
              currentDayIdx === idx ? 'bg-[#4464AD] text-white shadow-lg scale-105' : 'bg-white text-[#A4B0F5] border border-[#A4B0F5]/20']">
              {{ day.dateLabel }}
            </button>
          </div>
        </div>

        <!-- æ™¯é»åˆ—è¡¨ -->
        <div class="flex-1 overflow-y-auto custom-scrollbar px-5 pt-5 pb-44">
          <div class="flex justify-between items-end mb-6">
            <div>
              <h2 class="text-lg font-black text-[#4464AD] leading-tight">{{ itinerary[currentDayIdx].title }}</h2>
              <span class="text-[9px] font-black text-[#466995] bg-[#4464AD]/5 px-2 py-0.5 rounded-full uppercase tracking-tighter">
                {{ itinerary[currentDayIdx].spots.length }} å€‹é è¨‚åœ°é»
              </span>
            </div>
            <button @click="showAddModal = true" class="w-10 h-10 rounded-xl bg-[#F58F29] text-white flex items-center justify-center shadow-lg active:scale-90 transition-transform">
              <i data-lucide="plus"></i>
            </button>
          </div>

          <!-- è¡Œç¨‹å¡ç‰‡ -->
          <transition-group name="fade-up" tag="div" class="space-y-4">
            <div v-for="spot in itinerary[currentDayIdx].spots" :key="spot.id" 
              class="bg-white p-4 rounded-[28px] border border-gray-100 shadow-sm flex items-start relative overflow-hidden">
              <div class="w-12 h-12 rounded-[18px] bg-[#A4B0F5]/10 flex flex-col items-center justify-center shrink-0 mr-4 border border-[#A4B0F5]/20">
                <span class="text-[11px] font-black text-[#4464AD]">{{ spot.time }}</span>
                <span class="text-[7px] font-bold text-[#466995]">SPOT</span>
              </div>
              <div class="flex-1 pr-2">
                <h4 class="font-bold text-[#4464AD] text-sm mb-1 leading-snug">{{ spot.name }}</h4>
                <p class="text-[11px] text-gray-400 font-medium leading-relaxed">{{ spot.desc }}</p>
                
                <div v-if="spot.transport" class="mt-2 flex items-center bg-[#F8F9FA] px-2 py-1.5 rounded-xl border border-dashed border-[#A4B0F5]/30">
                  <i data-lucide="info" class="w-3 h-3 text-[#4464AD] mr-1.5 shrink-0"></i>
                  <p class="text-[9px] font-bold text-[#466995]">{{ spot.transport }}</p>
                </div>
                
                <div class="flex mt-4 space-x-2">
                  <a v-if="spot.mapUrl" :href="spot.mapUrl" 
                     target="_blank" 
                     class="flex items-center text-[10px] font-black text-white bg-[#4464AD] px-3 py-2 rounded-xl shadow-md active:scale-95 transition-all">
                    <i data-lucide="map" class="w-3 h-3 mr-1.5"></i> é–‹å•Ÿåœ°åœ–
                  </a>
                  <button @click="removeSpot(spot.id)" class="text-[10px] font-black text-red-400/60 px-2 py-2">
                    ç§»é™¤
                  </button>
                </div>
              </div>
              <i data-lucide="navigation" class="absolute -right-4 -bottom-4 text-[#4464AD]/5 w-20 h-20 -rotate-12 pointer-events-none"></i>
            </div>
          </transition-group>
          
          <div class="mt-8 text-center opacity-10">
             <i data-lucide="arrow-down" class="mx-auto w-4 h-4"></i>
             <p class="text-[8px] font-bold mt-1 uppercase tracking-widest">End of Day {{ currentDayIdx + 1 }}</p>
          </div>
        </div>
      </div>

      <!-- è¨˜å¸³è¦–åœ– -->
      <div v-if="activeTab === 'finance'" class="h-full overflow-y-auto custom-scrollbar px-5 pt-4 pb-44">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-sm font-black text-[#4464AD] uppercase tracking-widest">æ”¶æ”¯ç¸½è¦½</h2>
          <button @click="showAddExpenseModal = true" class="w-8 h-8 rounded-lg bg-[#F58F29] text-white flex items-center justify-center shadow-md active:scale-90 transition-transform">
            <i data-lucide="plus" class="w-4 h-4"></i>
          </button>
        </div>

        <div class="bg-gradient-to-br from-[#4464AD] to-[#466995] p-8 rounded-[32px] shadow-2xl text-white mb-8">
          <p class="text-[9px] opacity-70 mb-1 font-bold tracking-widest uppercase">ç¸½æ”¯å‡ºä¼°ç®—</p>
          <h2 class="text-4xl font-black">à¸¿ {{ totalExpenses.toLocaleString() }}</h2>
        </div>
        
        <div class="space-y-3">
          <div v-for="exp in expenses" :key="exp.id" class="bg-white p-4 rounded-2xl border border-gray-100 flex justify-between items-center group relative overflow-hidden">
            <div class="flex items-center space-x-4">
              <div class="w-10 h-10 bg-[#A4B0F5]/10 rounded-xl flex items-center justify-center font-bold text-[#4464AD] text-xs">
                <i v-if="exp.cat === 'é¤é£²'" data-lucide="utensils" class="w-4 h-4"></i>
                <i v-else-if="exp.cat === 'äº¤é€š'" data-lucide="car" class="w-4 h-4"></i>
                <i v-else-if="exp.cat === 'è³¼ç‰©'" data-lucide="shopping-cart" class="w-4 h-4"></i>
                <i v-else data-lucide="circle-ellipsis" class="w-4 h-4"></i>
              </div>
              <div>
                <h4 class="text-xs font-bold text-gray-700">{{ exp.note }}</h4>
                <div class="flex space-x-2 items-center">
                   <span class="text-[8px] font-black px-1.5 py-0.5 rounded bg-gray-100 text-gray-400 uppercase tracking-tighter">{{ exp.cat }}</span>
                   <p class="text-[9px] text-gray-400 font-bold">{{ exp.date }}</p>
                </div>
              </div>
            </div>
            <div class="flex items-center space-x-3">
              <div class="font-black text-sm text-[#7D4600]">à¸¿{{ exp.amount.toLocaleString() }}</div>
              <button @click="removeExpense(exp.id)" class="opacity-0 group-hover:opacity-100 transition-opacity p-1 text-red-300">
                <i data-lucide="x" class="w-3 h-3"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- æ¸…å–®è¦–åœ– -->
      <div v-if="activeTab === 'shopping'" class="h-full overflow-y-auto custom-scrollbar px-5 pt-4 pb-44">
        <div class="bg-white p-6 rounded-[32px] border border-gray-100 mb-6 shadow-sm">
          <h3 class="font-black text-sm text-[#4464AD] mb-6 uppercase tracking-widest flex items-center">
            <i data-lucide="shopping-bag" class="mr-2 text-[#F58F29] w-4 h-4"></i> å¿…å‚™/å¿…è²·
          </h3>
          <div class="space-y-1">
            <div v-for="item in shoppingList" :key="item.id" @click="item.done = !item.done" 
              class="flex items-center space-x-4 py-3 px-2 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group">
              <div :class="['w-6 h-6 rounded-full border-2 transition-all flex items-center justify-center', item.done ? 'bg-[#A4B0F5] border-[#A4B0F5]' : 'border-[#A4B0F5]/40']">
                <i v-if="item.done" data-lucide="check" class="w-3 h-3 text-white"></i>
              </div>
              <span :class="['text-xs font-bold', item.done ? 'text-gray-300 line-through' : 'text-gray-600']">{{ item.text }}</span>
            </div>
          </div>
        </div>
      </div>

    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 glass-nav border-t border-gray-100/50 px-8 pt-4 pb-8 flex justify-between items-center z-50 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]">
      <button @click="activeTab = 'itinerary'" :class="activeTab === 'itinerary' ? 'text-[#4464AD]' : 'text-[#A4B0F5]/40'" class="flex flex-col items-center space-y-1 transition-colors">
        <i data-lucide="calendar" class="w-5 h-5 transition-transform" :class="activeTab === 'itinerary' ? 'scale-110' : ''"></i>
        <span class="text-[8px] font-black uppercase tracking-tighter">è¡Œç¨‹</span>
      </button>
      <button @click="activeTab = 'finance'" :class="activeTab === 'finance' ? 'text-[#4464AD]' : 'text-[#A4B0F5]/40'" class="flex flex-col items-center space-y-1 transition-colors">
        <i data-lucide="wallet" class="w-5 h-5 transition-transform" :class="activeTab === 'finance' ? 'scale-110' : ''"></i>
        <span class="text-[8px] font-black uppercase tracking-tighter">è¨˜å¸³</span>
      </button>
      <button @click="activeTab = 'shopping'" :class="activeTab === 'shopping' ? 'text-[#4464AD]' : 'text-[#A4B0F5]/40'" class="flex flex-col items-center space-y-1 transition-colors">
        <i data-lucide="shopping-bag" class="w-5 h-5 transition-transform" :class="activeTab === 'shopping' ? 'scale-110' : ''"></i>
        <span class="text-[8px] font-black uppercase tracking-tighter">æ¸…å–®</span>
      </button>
    </nav>

    <!-- Modal: Add Spot -->
    <div v-if="showAddModal" class="fixed inset-0 z-[100] flex items-end justify-center p-4">
      <div class="absolute inset-0 bg-[#4464AD]/20 backdrop-blur-sm" @click="showAddModal = false"></div>
      <div class="relative w-full max-w-sm bg-white rounded-[32px] p-8 shadow-2xl animate-slide-up">
        <div class="w-12 h-1.5 bg-gray-100 rounded-full mx-auto mb-8"></div>
        <h3 class="text-xl font-black text-[#4464AD] mb-6">æ–°å¢ä»Šæ—¥åœ°é»</h3>
        <div class="space-y-4 overflow-y-auto max-h-[60vh] no-scrollbar">
          <div>
            <label class="text-[9px] font-bold text-[#A4B0F5] uppercase ml-1">æ™¯é»åç¨±</label>
            <input v-model="newItem.name" placeholder="æ™¯é»åç¨±" class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 text-xs font-bold focus:ring-2 focus:ring-[#A4B0F5]">
          </div>
          <div class="flex space-x-3">
            <div class="flex-1">
              <label class="text-[9px] font-bold text-[#A4B0F5] uppercase ml-1">æŠµé”æ™‚é–“</label>
              <input v-model="newItem.time" type="time" class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 text-xs font-bold">
            </div>
            <div class="flex-1">
              <label class="text-[9px] font-bold text-[#A4B0F5] uppercase ml-1">äº¤é€šæ–¹å¼</label>
              <input v-model="newItem.transport" placeholder="BTS/MRT/Grab" class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 text-xs font-bold focus:ring-2 focus:ring-[#A4B0F5]">
            </div>
          </div>
          <button @click="addSpot" class="w-full py-5 bg-[#F58F29] text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl active:scale-95 transition-all">ç¢ºèªåŠ å…¥</button>
        </div>
      </div>
    </div>

    <!-- Modal: Add Expense -->
    <div v-if="showAddExpenseModal" class="fixed inset-0 z-[100] flex items-end justify-center p-4">
      <div class="absolute inset-0 bg-[#4464AD]/20 backdrop-blur-sm" @click="showAddExpenseModal = false"></div>
      <div class="relative w-full max-w-sm bg-white rounded-[32px] p-8 shadow-2xl animate-slide-up">
        <div class="w-12 h-1.5 bg-gray-100 rounded-full mx-auto mb-8"></div>
        <h3 class="text-xl font-black text-[#4464AD] mb-6">æ–°å¢æ”¯å‡ºç´€éŒ„</h3>
        <div class="space-y-4 overflow-y-auto max-h-[60vh] no-scrollbar">
          <div>
            <label class="text-[9px] font-bold text-[#A4B0F5] uppercase ml-1">æ”¯å‡ºé¡åˆ¥</label>
            <div class="flex space-x-2 mt-1">
               <button v-for="cat in ['é¤é£²', 'äº¤é€š', 'è³¼ç‰©', 'å…¶ä»–']" @click="newExpense.cat = cat" :class="['px-3 py-2 rounded-xl text-[10px] font-bold transition-all', newExpense.cat === cat ? 'bg-[#4464AD] text-white' : 'bg-gray-100 text-gray-400']">{{ cat }}</button>
            </div>
          </div>
          <div>
            <label class="text-[9px] font-bold text-[#A4B0F5] uppercase ml-1">é‡‘é¡ (à¸¿)</label>
            <input v-model.number="newExpense.amount" type="number" placeholder="è¼¸å…¥æ³°éŠ–é‡‘é¡" class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 text-xs font-bold focus:ring-2 focus:ring-[#A4B0F5]">
          </div>
          <div>
            <label class="text-[9px] font-bold text-[#A4B0F5] uppercase ml-1">æ”¯å‡ºå‚™è¨»</label>
            <input v-model="newExpense.note" placeholder="ä¾‹å¦‚ï¼šæ‰‹æ¨™å¥¶èŒ¶" class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 text-xs font-bold focus:ring-2 focus:ring-[#A4B0F5]">
          </div>
          <div>
            <label class="text-[9px] font-bold text-[#A4B0F5] uppercase ml-1">æ—¥æœŸ</label>
            <input v-model="newExpense.date" placeholder="å¦‚ 2/25" class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 text-xs font-bold focus:ring-2 focus:ring-[#A4B0F5]">
          </div>
          <button @click="addExpense" class="w-full py-5 bg-[#F58F29] text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl active:scale-95 transition-all">åŠ å…¥å¸³å–®</button>
        </div>
      </div>
    </div>

  </div>

  <script>
    const { createApp, ref, computed, onMounted, nextTick, watch } = Vue;

    createApp({
      setup() {
        const activeTab = ref('itinerary');
        const currentDayIdx = ref(0);
        const showAddModal = ref(false);
        const showAddExpenseModal = ref(false);

        const newItem = ref({ name: '', time: '12:00', desc: '', transport: '' });
        const newExpense = ref({ cat: 'é¤é£²', amount: null, note: '', date: '2/25' });

        const itinerary = ref([
          { dateLabel: '2/25 (äºŒ)', title: 'Day 1: å…¥å¢ƒæ›¼è°·', spots: [
            { id: 1, time: '16:45', name: 'ç´ è¬é‚£æ™®æ©Ÿå ´ (BKK)', desc: 'å…¥å¢ƒè¾¦ç†ã€æ›éŒ¢ã€é ˜SIMå¡', transport: 'å»ºè­°æ­ä¹˜ Airport Link æˆ– Taxi åˆ°å¸‚å€', mapUrl: '' },
            { id: 2, time: '18:30', name: 'Shama Sukhumvit', desc: 'é£¯åº— Check-in æ”¾ç½®è¡Œæ', transport: 'é„°è¿‘ BTS Nana ç«™', mapUrl: '' },
            { id: 3, time: '19:30', name: 'Taling Pling (Siam Paragon)', desc: 'ç¬¬ä¸€é¤ç±³å…¶æ—æ¨è–¦æ³°èœ', transport: 'æ­ä¹˜ BTS è‡³ Siam ç«™ç›´çµ', mapUrl: 'https://maps.app.goo.gl/3u6i2zAYh9CzLCBo9' },
            { id: 4, time: '21:30', name: 'æ°´é–€å¤œå¸‚ (å‚™æ¡ˆ)', desc: 'ç™¾è²¨é—œé–€å¾Œçš„å¤œå¸‚å‚™æ¡ˆ', transport: 'å¾ Siam æ­¥è¡Œç´„ 15 åˆ†é˜æˆ–æ­ Tuk Tuk', mapUrl: 'https://maps.app.goo.gl/LazKWchPoGCCwkCF7' }
          ]},
          { dateLabel: '2/26 (ä¸‰)', title: 'Day 2: è€åŸå€ç¾é£Ÿå·¡ç¦®', spots: [
            { id: 5, time: '10:00', name: 'å—é¾å¸‚å ´ Nang Loeng Market', desc: 'å‚³çµ±å¸‚å ´èˆ‡åœ¨åœ°è€å‘³', transport: 'å»ºè­°æ­ä¹˜ Grab/Bolt å‰å¾€', mapUrl: '' },
            { id: 6, time: '13:00', name: 'æ³°å¼æŒ‰æ‘©ä¼‘æ¯', desc: 'æ”¾é¬†ç·Šç¹ƒçš„è‚Œè‚‰', transport: 'å¸‚å ´å‘¨é‚ŠæŒ‰æ‘©åº—', mapUrl: 'https://maps.app.goo.gl/91NqTykNtoJV7SR6A' },
            { id: 7, time: '15:00', name: 'è€åŸå€å¤§é¦éŸ† & å§å§æ²–èŒ¶', desc: 'åœ°æ¨™æ‹ç…§èˆ‡å‚³çµ±èŒ¶é£²', transport: 'æ­¥è¡Œæˆ–æ­çŸ­ç¨‹ Tuk Tuk', mapUrl: 'https://maps.app.goo.gl/xWPGhCfH95UDctwt8' },
            { id: 8, time: '16:30', name: 'K. Panich Sticky Rice', desc: 'è¶…æœ‰åèŠ’æœç³¯ç±³é£¯', transport: 'å¾å¤§é¦éŸ†æ­¥è¡Œç´„ 5 åˆ†é˜', mapUrl: 'https://maps.app.goo.gl/kJK4sAmPbS1tGLxs8' },
            { id: 9, time: '18:00', name: 'Krua Apsorn @Dinso', desc: 'ç±³å…¶æ—å¿…æ¯”ç™»æ¨è–¦æ³°èœ', transport: 'è€åŸå€å…§ç§»å‹•å»ºè­° Grab', mapUrl: 'https://maps.app.goo.gl/NrJ3UH2LTJpzH7Ub7' },
            { id: 10, time: '19:30', name: 'Pad Thai Fai Ta Lu', desc: 'ç‚­ç«ç‚’æ²³ç²‰ååº—', transport: 'é„°è¿‘ Krua Apsorn', mapUrl: 'https://maps.app.goo.gl/eHTbSdZBuZTFdcBh6' },
            { id: 11, time: '20:30', name: 'Mont NomSod', desc: 'è€åº—ç¶“å…¸çƒ¤åå¸', transport: 'è€åŸå€ååº—ï¼Œå»ºè­°æ­¥è¡Œ', mapUrl: 'https://maps.app.goo.gl/xnzayx7pJXoY849N6' },
            { id: 12, time: '21:30', name: 'MBK Center', desc: 'é€›ç™¾è²¨æˆ–åœ¨å‘¨é‚Šç”¨é¤', transport: 'æ­ä¹˜ Grab æˆ–å‰å¾€ BTS National Stadium', mapUrl: 'https://maps.app.goo.gl/3u6i2zAYh9CzLCBo9' }
          ]},
          { dateLabel: '2/27 (å››)', title: 'Day 3: åµ©è¶Šè·¯èˆ‡ä¸‰è˜å¸‚å ´', spots: [
            { id: 13, time: '10:00', name: 'åµ©è¶Šè·¯ & ä¸‰è˜æ‰¹ç™¼å¸‚å ´', desc: 'å¤è€å•†åœˆèˆ‡æ‰¹ç™¼è–åœ°', transport: 'æ­ä¹˜ MRT åˆ° Wat Mangkon ç«™', mapUrl: 'https://maps.app.goo.gl/FHyFM4w7jxExHN986' },
            { id: 14, time: '11:30', name: 'Milk Toast ç‚­çƒ¤åœŸå¸', desc: 'ç´”æ‰‹å·¥æœ¨ç‚­çƒ¤è£½', transport: 'ä¸‰è˜å¸‚å ´å…§æ­¥è¡Œ', mapUrl: 'https://maps.app.goo.gl/Z3k2vj8rQ4u8MYJaA' },
            { id: 15, time: '13:00', name: 'Jap Bread @Talat Noi', desc: 'å·§å…‹åŠ›é¦™è•‰ç…é¤…', transport: 'çŸ³é¾è»è·¯ä¸€å¸¶æ­¥è¡Œæ¢ç´¢', mapUrl: 'https://maps.app.goo.gl/bG6u8BnFExKroYeu9' },
            { id: 16, time: '14:00', name: '965bkk å±•å ´', desc: 'åœ¨åœ°è—è¡“å±•è¦½ç©ºé–“', transport: 'Talat Noi å€åŸŸå…§', mapUrl: 'https://maps.app.goo.gl/ZBtm8Vt2BdWhLa3S7' },
            { id: 17, time: '15:00', name: 'The Summer Coffee', desc: 'ç‰¹è‰²ç³–çµ²å’–å•¡', transport: 'Talat Noi å··å¼„å…§', mapUrl: 'https://maps.app.goo.gl/DQBNFHXVYW7R1kqC8' },
            { id: 18, time: '16:00', name: 'Hong Sieng Kong', desc: 'ç™¾å¹´è€å®…æ²³ç•”å’–å•¡å»³', transport: 'æ²³ç•”æ™¯è§€ï¼Œå»ºè­°æ­èˆ¹æˆ– Grab', mapUrl: 'https://maps.app.goo.gl/uFF3CwsAWrHXVMq57' },
            { id: 19, time: '17:30', name: 'Pista& (à¸à¸´à¸ªà¸•à¹‰à¸²à¹à¸­à¸™à¸”à¹Œ)', desc: 'æ‰‹ä½œé–‹å¿ƒæœå¥¶å†°åº—', transport: 'åµ©è¶Šè·¯äººæ°£åº—', mapUrl: 'https://maps.app.goo.gl/JRYdXYVBZU2bLqbw8' },
            { id: 20, time: '19:00', name: 'Sam Lor (æ™šé¤)', desc: 'ç±³å…¶æ—æ¨è–¦èˆ’æœé›·æ­å§†è›‹é£¯', transport: 'å»ºè­°æ­ Grab å‰å¾€', mapUrl: 'https://maps.app.goo.gl/YucY1ptKEZQK9LAf7' },
            { id: 21, time: '21:00', name: 'æš¹ç¾…å»£å ´ / ä¸­å¤®ä¸–ç•Œ', desc: 'é£¯åº—ä¼‘æ¯å¾Œé€›é€›ç™¾è²¨', transport: 'BTS Siam ç«™å‘¨é‚Š', mapUrl: 'https://maps.app.goo.gl/qXfQurhsVUxVbPLj8' }
          ]},
          { dateLabel: '2/28 (äº”)', title: 'Day 4: æ´½åœ–æ°é€±æœ«ç‹‚æ­¡', spots: [
            { id: 22, time: '10:00', name: 'æ°åœ–æ°é€±æœ«å¸‚é›†', desc: 'æœ€å¤§è¦æ¨¡è³¼ç‰©è–åœ°', transport: 'BTS Mo Chit æˆ– MRT Chatuchak Park', mapUrl: 'https://maps.app.goo.gl/jDgMmK7yxmGwUb8YA' },
            { id: 23, time: '19:00', name: 'Jodd Fairs (åŸå ¡å¤œå¸‚)', desc: 'äººæ°£å¤œå¸‚ç¾é£Ÿèˆ‡æ°£æ°›', transport: 'MRT Rama 9 ç«™ 2 è™Ÿå‡ºå£', mapUrl: 'https://maps.app.goo.gl/vzxFNphrS5VUWWFx8' }
          ]},
          { dateLabel: '3/01 (å…­)', title: 'Day 5: å¸­éš†æ™‚å°šå·¡ç¦®', spots: [
            { id: 24, time: '12:00', name: 'Central Park Bangkok', desc: 'ç±³å…¶æ—ç¾é£Ÿä¸€æ¢è¡—', transport: 'BTS Sala Daeng ç«™', mapUrl: 'https://maps.app.goo.gl/R6mW2sED5uJrvtNc8' },
            { id: 25, time: '15:00', name: 'Tawanchai Fresh Milk', desc: 'åœ¨åœ°å¿…å–é®®å¥¶é»å¿ƒ', transport: 'å¸­éš†å€åŸŸæ­¥è¡Œ', mapUrl: 'https://maps.app.goo.gl/DmAFCKE68ifGycCq8' },
            { id: 26, time: '19:00', name: 'Save One Go Market', desc: 'ç¾é£Ÿè±å¯Œçš„åœ¨åœ°å¤œå¸‚', transport: 'æ­ä¹˜ BTS ç¶ ç·šåˆ°åº•ç«™ Yaek Kor Por Aor', mapUrl: 'https://maps.app.goo.gl/45ovTXME2ViFhLGN8' }
          ]},
          { dateLabel: '3/02 (æ—¥)', title: 'Day 6: ç²¾ç·»ç™¾è²¨èˆ‡å’–å•¡', spots: [
            { id: 27, time: '12:00', name: 'Fa pla tahn @Chidlom', desc: 'äººæ°£å¤§èˆ¹éºµ', transport: 'BTS Chit Lom ç«™', mapUrl: 'https://maps.app.goo.gl/DwQuCafADh9oRK7e6' },
            { id: 28, time: '14:30', name: 'Piccolo Vicolo Cafe', desc: 'åŸå¸‚ä¸­çš„ç¶ æ´²å’–å•¡å»³', transport: 'BTS Ratchathewi ç«™æ­¥è¡Œç´„ 10 åˆ†', mapUrl: 'https://maps.app.goo.gl/zKXQKetsyF97JBxr9' },
            { id: 29, time: '18:00', name: 'ä¸­å¤®ä¸–ç•Œè³¼ç‰©å•†å ´', desc: 'ç™¾è²¨æœ€å¾Œæ¡è²·èˆ‡é€›è¡—', transport: 'BTS Siam/Chit Lom æ­¥è¡Œç©ºæ©‹ç›´é”', mapUrl: 'https://maps.app.goo.gl/k25XNma22C6gQAJs7' }
          ]},
          { dateLabel: '3/03 (ä¸€)', title: 'Day 7: å½ˆæ€§æ´»å‹•', spots: [
            { id: 100, time: '12:00', name: 'è‡ªç”±è¡Œç¨‹', desc: 'é ç•™é«”åŠ›æˆ–å›è¨ªæƒ³å»çš„åœ°æ–¹', transport: 'å»ºè­°ä¾ç…§éœ€æ±‚æ­é… BTS/MRT', mapUrl: '' }
          ]},
          { dateLabel: '3/04 (äºŒ)', title: 'Day 8: å½ˆæ€§æ´»å‹•', spots: [
            { id: 101, time: '12:00', name: 'è‡ªç”±è¡Œç¨‹', desc: 'æœ€å¾Œæ¡è²·ä¼´æ‰‹ç¦® (Big C)', transport: 'BTS Chit Lom ç«™å‘¨é‚Š', mapUrl: '' }
          ]},
          { dateLabel: '3/05 (ä¸‰)', title: 'Day 9: å¹³å®‰è³¦æ­¸', spots: [
            { id: 30, time: '11:00', name: 'Savoey @Chidlom', desc: 'è±ªè¯æµ·é®®å¤§é¤ (èƒèŸ¹å’–å“©)', transport: 'BTS Chit Lom ç«™ The Mercury Ville å…§', mapUrl: 'https://maps.app.goo.gl/vHXpSwYCAQJi22fDA' },
            { id: 31, time: '14:30', name: 'å‰å¾€ BKK æ©Ÿå ´', desc: '17:50 ç­æ©Ÿèµ·é£›', transport: 'é ç•™å¡è»Šæ™‚é–“ï¼Œå»ºè­°æ­ä¹˜ Airport Link', mapUrl: '' }
          ]}
        ]);

        const expenses = ref([
          { id: 1, cat: 'é¤é£²', amount: 1200, note: 'Taling Pling', date: '2/25' },
          { id: 2, cat: 'äº¤é€š', amount: 450, note: 'æ©Ÿå ´è¨ˆç¨‹è»Š', date: '2/25' },
          { id: 3, cat: 'è³¼ç‰©', amount: 1500, note: 'Souvenir Shopping', date: '3/01' }
        ]);

        const shoppingList = ref([
          { id: 1, text: 'è­·ç…§ç°½è­‰', done: true },
          { id: 2, text: 'æ³°éŠ–ç¾é‡‘', done: true },
          { id: 3, text: 'é¼»é€šå…«ä»™ç­’', done: false },
          { id: 4, text: 'æ‰‹æ¨™å¥¶èŒ¶ç²‰', done: false },
          { id: 5, text: 'å°æµ£ç†Šæµ·è‹”', done: false }
        ]);

        const totalExpenses = computed(() => expenses.value.reduce((s, e) => s + e.amount, 0));

        const addSpot = () => {
          if (!newItem.value.name) return;
          itinerary.value[currentDayIdx.value].spots.push({
            id: Date.now(),
            ...newItem.value,
            mapUrl: ''
          });
          itinerary.value[currentDayIdx.value].spots.sort((a, b) => a.time.localeCompare(b.time));
          showAddModal.value = false;
          newItem.value = { name: '', time: '12:00', desc: '', transport: '' };
          nextTick(() => lucide.createIcons());
        };

        const removeSpot = (id) => {
          itinerary.value[currentDayIdx.value].spots = itinerary.value[currentDayIdx.value].spots.filter(s => s.id !== id);
          nextTick(() => lucide.createIcons());
        };

        const addExpense = () => {
          if (!newExpense.value.amount || !newExpense.value.note) return;
          expenses.value.unshift({
            id: Date.now(),
            ...newExpense.value
          });
          showAddExpenseModal.value = false;
          newExpense.value = { cat: 'é¤é£²', amount: null, note: '', date: '2/25' };
          nextTick(() => lucide.createIcons());
        };

        const removeExpense = (id) => {
          expenses.value = expenses.value.filter(e => e.id !== id);
          nextTick(() => lucide.createIcons());
        };

        onMounted(() => {
          lucide.createIcons();
        });

        watch([activeTab, currentDayIdx, showAddModal, showAddExpenseModal], () => {
          nextTick(() => lucide.createIcons());
        });

        return { 
          activeTab, itinerary, currentDayIdx, expenses, shoppingList, totalExpenses, 
          showAddModal, showAddExpenseModal, newItem, newExpense, addSpot, removeSpot, addExpense, removeExpense 
        };
      }
    }).mount('#app');
  </script>
</body>
</html>
